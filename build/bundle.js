!function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=105)}([function(e,t){e.exports=require("react")},function(e,t){e.exports=require("immutable")},function(e,t){e.exports=require("@material-ui/core/Typography")},function(e,t){e.exports=require("ol/style")},function(e,t){e.exports=require("@material-ui/core/Button")},function(e,t){e.exports=require("@material-ui/core/TextField")},function(e,t){e.exports=require("@material-ui/core/MenuItem")},function(e,t){e.exports=require("@apollo/react-hooks")},function(e,t){e.exports=require("graphql-tag")},function(e,t){e.exports=require("@material-ui/core/Card")},function(e,t){e.exports=require("@material-ui/core/ListItemText")},function(e,t){e.exports=require("@material-ui/core/List")},function(e,t){e.exports=require("geospatialdraw")},function(e,t){e.exports=require("@material-ui/core/Divider")},function(e,t){e.exports=require("@material-ui/core/ListItem")},function(e,t){e.exports=require("@material-ui/core/FormControl")},function(e,t){e.exports=require("@material-ui/core/InputLabel")},function(e,t){e.exports=require("@material-ui/core/Select")},function(e,t){e.exports=require("@material-ui/core/IconButton")},function(e,t){e.exports=require("@material-ui/core/CardContent")},function(e,t){e.exports=require("@material-ui/core/Tab")},function(e,t){e.exports=require("react-router-dom")},function(e,t){e.exports=require("@material-ui/core/LinearProgress")},function(e,t){e.exports=require("@material-ui/core/FormHelperText")},function(e,t){e.exports=require("@material-ui/core/Checkbox")},function(e,t){e.exports=require("@material-ui/core/Dialog")},function(e,t){e.exports=require("@material-ui/core/Tabs")},function(e,t){e.exports=require("@material-ui/core/CardActions")},function(e,t){e.exports=require("@material-ui/core/Menu")},function(e,t){e.exports=require("react-dom/server")},function(e,t){e.exports=require("@material-ui/core/Grid")},function(e,t){e.exports=require("@material-ui/core/Box")},function(e,t){e.exports=require("express")},function(e,t){e.exports=require("@material-ui/pickers")},function(e,t){e.exports=require("@material-ui/core/TableRow")},function(e,t){e.exports=require("@material-ui/core/TableCell")},function(e,t){e.exports=require("ol")},function(e,t){e.exports=require("polished")},function(e,t){e.exports=require("@material-ui/core/AppBar")},function(e,t){e.exports=require("@material-ui/core/Drawer")},function(e,t){e.exports=require("@material-ui/core/Toolbar")},function(e,t){e.exports=require("@material-ui/icons/AccessibleForward")},function(e,t){e.exports=require("@material-ui/icons/Cloud")},function(e,t){e.exports=require("@material-ui/icons/CollectionsBookmark")},function(e,t){e.exports=require("@material-ui/icons/FindInPage")},function(e,t){e.exports=require("@material-ui/icons/Home")},function(e,t){e.exports=require("@material-ui/icons/InfoSharp")},function(e,t){e.exports=require("@material-ui/icons/Menu")},function(e,t){e.exports=require("@material-ui/icons/Search")},function(e,t){e.exports=require("@material-ui/icons/ViewList")},function(e,t){e.exports=require("@material-ui/core/ListItemIcon")},function(e,t){e.exports=require("@material-ui/icons/CloudDoneOutlined")},function(e,t){e.exports=require("@material-ui/icons/OfflineBoltOutlined")},function(e,t){e.exports=require("@material-ui/core/Fab")},function(e,t){e.exports=require("@material-ui/core/Input")},function(e,t){e.exports=require("@material-ui/core/Paper")},function(e,t){e.exports=require("@material-ui/icons/Remove")},function(e,t){e.exports=require("@date-io/date-fns")},function(e,t){e.exports=require("@material-ui/core/Table")},function(e,t){e.exports=require("@material-ui/core/TableHead")},function(e,t){e.exports=require("@material-ui/core/TableBody")},function(e,t){e.exports=require("@material-ui/icons/UnfoldMore")},function(e,t){e.exports=require("@material-ui/icons/UnfoldLess")},function(e,t){e.exports=require("@material-ui/lab/Skeleton")},function(e,t){e.exports=require("@material-ui/icons/BrokenImage")},function(e,t){e.exports=require("@material-ui/icons/Cancel")},function(e,t){e.exports=require("@material-ui/core/CircularProgress")},function(e,t){e.exports=require("@material-ui/core/ListItemSecondaryAction")},function(e,t){e.exports=require("@material-ui/icons/PlayCircleFilled")},function(e,t){e.exports=require("@material-ui/icons/Error")},function(e,t){e.exports=require("@material-ui/core/TablePagination")},function(e,t){e.exports=require("@material-ui/core/Link")},function(e,t){e.exports=require("@material-ui/core/FormLabel")},function(e,t){e.exports=require("@material-ui/icons/Redo")},function(e,t){e.exports=require("@material-ui/icons/Undo")},function(e,t){e.exports=require("@material-ui/core/CardHeader")},function(e,t){e.exports=require("@material-ui/icons/AddCircleOutline")},function(e,t){e.exports=require("@material-ui/core/DialogActions")},function(e,t){e.exports=require("@material-ui/core/DialogContent")},function(e,t){e.exports=require("@material-ui/core/DialogContentText")},function(e,t){e.exports=require("@material-ui/core/DialogTitle")},function(e,t){e.exports=require("@material-ui/icons/Share")},function(e,t){e.exports=require("@material-ui/icons/Delete")},function(e,t){e.exports=require("@material-ui/core/Snackbar")},function(e,t){e.exports=require("@material-ui/core/SnackbarContent")},function(e,t){e.exports=require("moment")},function(e,t){e.exports=require("@material-ui/icons/Close")},function(e,t){e.exports=require("react-dom")},function(e,t){e.exports=require("golden-layout")},function(e,t){e.exports=require("ol/layer/Tile")},function(e,t){e.exports=require("ol/source/OSM")},function(e,t){e.exports=require("ol/geom/MultiPoint")},function(e,t){e.exports=require("ol/format/WKT")},function(e,t){e.exports=require("ol/format/GeoJSON")},function(e,t){e.exports=require("react-router-config")},function(e,t){e.exports=require("apollo-client")},function(e,t){e.exports=require("apollo-link-schema")},function(e,t){e.exports=require("apollo-cache-inmemory")},function(e,t){e.exports=require("graphql-tools")},function(e,t){e.exports=require("axios")},function(e,t){e.exports=require("@apollo/react-ssr")},function(e,t){e.exports=require("react-apollo")},function(e,t){e.exports=require("babel-polyfill")},function(e,t){e.exports=require("golden-layout/src/css/goldenlayout-base.css")},function(e,t){e.exports=require("golden-layout/src/css/goldenlayout-light-theme.css")},function(e,t,r){"use strict";r.r(t);r(102);var n=r(32),a=r.n(n),o=r(0),i=r.n(o),l=r(38),u=r.n(l),c=r(4),s=r.n(c),f=r(39),m=r.n(f),p=r(18),d=r.n(p),y=r(40),v=r.n(y),b=r(2),g=r.n(b),h=r(41),E=r.n(h),O=r(42),j=r.n(O),w=r(43),x=r.n(w),S=r(44),P=r.n(S),C=r(45),T=r.n(C),k=r(46),A=r.n(k),q=r(47),I=r.n(q),D=r(48),R=r.n(D),M=r(49),W=r.n(M),F=r(21),L=r(7),N=r(8),B=r.n(N),z=r(13),_=r.n(z),H=r(9),G=r.n(H),U=r(19),J=r.n(U),Q=r(27),V=r.n(Q),$=r(22),K=r.n($);function Y(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  query AboutPage {\n    systemProperties {\n      product\n      branding\n      identifier\n      version\n      releaseDate\n    }\n  }\n"]);return Y=function(){return e},e}function Z(e){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var X=function(e){var t=e.title,r=e.value;return i.a.createElement(i.a.Fragment,null,i.a.createElement(g.a,{variant:"h6",component:"h2"},t),i.a.createElement(g.a,{color:"textSecondary",gutterBottom:!0},r))},ee=function(e){var t=e.version,r=e.identifier,n=e.releaseDate,a=e.branding,o=e.product;return i.a.createElement(J.a,null,i.a.createElement(g.a,{variant:"h4",component:"h1"},a," ",o),i.a.createElement(_.a,{style:{marginBottom:15,marginTop:10}}),i.a.createElement(X,{title:"Version",value:t}),i.a.createElement(X,{title:"Unique Identifier",value:r}),i.a.createElement(X,{title:"Release Date",value:n}))},te=function(e){var t=e.error,r=e.onFetchProperties;return i.a.createElement(i.a.Fragment,null,i.a.createElement(J.a,null,i.a.createElement(X,{title:"Error",value:t})),i.a.createElement(V.a,null,i.a.createElement(s.a,{variant:"contained",color:"primary",onClick:r},"Refresh")))},re=function(){return i.a.createElement(J.a,null,i.a.createElement(K.a,null))},ne=function(e){var t=e.error,r=e.attributes;return"string"==typeof t?i.a.createElement(te,e):null!==r&&"object"===Z(r)?i.a.createElement(ee,r):i.a.createElement(re,null)},ae=function(e){return i.a.createElement("div",{style:{maxWidth:600,margin:"20px auto"}},i.a.createElement(G.a,null,i.a.createElement(ne,e)))},oe=B()(Y()),ie=r(11),le=r.n(ie),ue=r(14),ce=r.n(ue),se=r(50),fe=r.n(se),me=r(10),pe=r.n(me),de=r(51),ye=r.n(de),ve=r(52),be=r.n(ve);function ge(){var e=Ee(["\n  query SourcesPages {\n    sources {\n      available\n      id\n    }\n  }\n"]);return ge=function(){return e},e}function he(){var e=Ee(["\n  query SourcePollInterval {\n    systemProperties {\n      sourcePollInterval\n    }\n  }\n"]);return he=function(){return e},e}function Ee(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Oe=function(e){var t=e.sources,r=t.filter(function(e){return!e.available}).length;return i.a.createElement("div",{style:{maxWidth:600,margin:"20px auto"}},i.a.createElement(G.a,null,i.a.createElement(J.a,null,i.a.createElement(g.a,{variant:"h5",component:"h1"},function(e){return 0===e?"All sources are currently up":1===e?"1 source is currently down":"".concat(e," sources are currently down")}(r)),i.a.createElement(_.a,{style:{marginBottom:15,marginTop:10}}),i.a.createElement(le.a,null,t.map(function(e){var t=function(e){return e.available?ye.a:be.a}(e);return i.a.createElement(ce.a,{key:e.id},i.a.createElement(fe.a,null,i.a.createElement(t,{key:e.available})),i.a.createElement(pe.a,null,i.a.createElement(g.a,null,e.id)))})))))},je=B()(he()),we=B()(ge()),xe=r(24),Se=r.n(xe),Pe=r(53),Ce=r.n(Pe),Te=r(15),ke=r.n(Te),Ae=r(23),qe=r.n(Ae),Ie=r(54),De=r.n(Ie),Re=r(16),Me=r.n(Re),We=r(28),Fe=r.n(We),Le=r(6),Ne=r.n(Le),Be=r(55),ze=r.n(Be),_e=r(17),He=r.n(_e),Ge=r(5),Ue=r.n(Ge),Je=r(56),Qe=r.n(Je),Ve=r(1),$e=["meters","kilometers","feet","yards","miles","nautical miles"],Ke=function(e){var t=e.value,r=e.onChange;return i.a.createElement(ke.a,null,i.a.createElement(Me.a,null,"Units"),i.a.createElement(He.a,{value:t||"meters",onChange:function(e){r(e)},renderValue:function(e){return e},style:{minWidth:100}},$e.map(function(e){return i.a.createElement(Ne.a,{key:e,value:e},i.a.createElement(Se.a,{checked:e===t}),i.a.createElement(pe.a,{primary:e}))})))},Ye=(Math.PI,function(e){var t=e.distance;switch(t=t||0,e.units){case"kilometers":return 1e3*t;case"feet":return.3048*t;case"yards":return.9144*t;case"miles":return 1609.344*t;case"nautical miles":return 1852*t;case"meters":default:return t}});function Ze(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Xe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ze(r,!0).forEach(function(t){et(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ze(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function et(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(a)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var rt=function(e){return e.map(function(e){var t=tt(e,2),r=t[0],n=t[1];return"".concat(r," ").concat(n)}).join()},nt=function(e){var t=e.value,r=void 0===t?Object(Ve.Map)():t,n=e.onChange,a=e.errors,o=void 0===a?{}:a,l=r.toJSON(),u=l.coordinates,c=void 0===u?"":u,s=l.bufferWidth,f=void 0===s?0:s,m=l.unit,p=void 0===m?"meters":m;return i.a.createElement("div",{style:{paddingTop:10}},i.a.createElement(Ue.a,{fullWidth:!0,label:"Line",error:void 0!==o.coordinates,helperText:o.coordinates,value:"string"==typeof c?c:JSON.stringify(c),onChange:function(e){var t=e.target.value;try{t=JSON.parse(t)}catch(e){}n(r.set("coordinates",t))}}),i.a.createElement("div",{style:{display:"flex",paddingTop:10}},i.a.createElement("div",{style:{flex:"1",overflow:"hidden"}},i.a.createElement(Ue.a,{fullWidth:!0,type:"number",label:"Buffer Width",error:void 0!==o.bufferWidth,helperText:o.bufferWidth,value:f,onChange:function(e){n(r.set("bufferWidth",e.target.value))}})),i.a.createElement("div",{style:{width:20}}),i.a.createElement(Ke,{value:p,onChange:function(e){n(r.set("unit",e.target.value))}})))},at=r(20),ot=r.n(at),it=r(26),lt=r.n(it);function ut(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(a)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var ct={0:function(e){var t=e.value,r=e.onChange,n=e.errors,a=t.toJSON(),o=a.lat,l=void 0===o?"":o,u=a.lon,c=void 0===u?"":u,s=a.bufferWidth,f=void 0===s?0:s,m=a.unit,p=void 0===m?"meters":m;return i.a.createElement("div",{style:{paddingTop:10}},i.a.createElement(Ue.a,{fullWidth:!0,label:"Lat",type:"number",error:void 0!==n.lat,helperText:n.lat,value:l,onChange:function(e){r(t.set("lat",e.target.value))}}),i.a.createElement(Ue.a,{fullWidth:!0,label:"Lon",type:"number",error:void 0!==n.lon,helperText:n.lon,value:c,onChange:function(e){r(t.set("lon",e.target.value))}}),i.a.createElement("div",{style:{display:"flex",paddingTop:10}},i.a.createElement("div",{style:{flex:"1",overflow:"hidden"}},i.a.createElement(Ue.a,{fullWidth:!0,type:"number",label:"Buffer Width",error:void 0!==n.bufferWidth,helperText:n.bufferWidth,value:f,onChange:function(e){r(t.set("bufferWidth",e.target.value))}})),i.a.createElement("div",{style:{width:20}}),i.a.createElement(Ke,{value:p,onChange:function(e){r(t.set("unit",e.target.value))}})))},1:null,2:null,3:null};function st(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ft(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?st(r,!0).forEach(function(t){mt(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):st(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function mt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(a)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var dt=function(e){return e.map(function(e){var t=pt(e,2),r=t[0],n=t[1];return"".concat(r," ").concat(n)}).join()};function yt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(a)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var vt={line:{label:"Line",component:nt,validate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(Ve.Map)(),t={},r=e.toJSON(),n=r.coordinates,a=void 0===n?[]:n,o=r.bufferWidth,i=void 0===o?0:o;return"string"==typeof a&&(t.coordinates="Invalid Line"),i<0&&(t.bufferWidth="Buffer width must be greater or equal to 0"),t},generateFilter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(Ve.Map)(),t=e.toJSON(),r=t.coordinates,n=t.bufferWidth,a=t.unit;return Xe({type:n>0?"DWITHIN":"INTERSECTS",property:"anyGeo",value:{type:"GEOMETRY",value:"LINESTRING(".concat(rt(r),")")}},n>0&&{distance:Ye({distance:n,units:a})},{geojson:{type:"Feature",geometry:{type:"LineString",coordinates:r},properties:{type:"LineString",buffer:{width:n,unit:a}}}})}},polygon:{label:"Polygon",component:function(e){var t=e.value,r=void 0===t?Object(Ve.Map)():t,n=e.onChange,a=e.errors,o=void 0===a?{}:a,l=r.toJSON(),u=l.coordinates,c=void 0===u?"":u,s=l.bufferWidth,f=void 0===s?0:s,m=l.unit,p=void 0===m?"meters":m;return i.a.createElement("div",{style:{paddingTop:10}},i.a.createElement(Ue.a,{fullWidth:!0,label:"Polygon",error:void 0!==o.coordinates,helperText:o.coordinates,value:"string"==typeof c?c:JSON.stringify(c),onChange:function(e){var t=e.target.value;try{t=JSON.parse(t)}catch(e){}n(r.set("coordinates",t))}}),i.a.createElement("div",{style:{display:"flex",paddingTop:10}},i.a.createElement("div",{style:{flex:"1",overflow:"hidden"}},i.a.createElement(Ue.a,{fullWidth:!0,type:"number",label:"Buffer Width",error:void 0!==o.bufferWidth,helperText:o.bufferWidth,value:f,onChange:function(e){n(r.set("bufferWidth",e.target.value))}})),i.a.createElement("div",{style:{width:20}}),i.a.createElement(Ke,{value:p,onChange:function(e){n(r.set("unit",e.target.value))}})))},validate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(Ve.Map)(),t={},r=e.toJSON(),n=r.coordinates,a=void 0===n?[]:n,o=r.bufferWidth,i=void 0===o?0:o;return"string"==typeof a&&(t.coordinates="Invalid polygon"),i<0&&(t.bufferWidth="Buffer width must be greater or equal to 0"),t},generateFilter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(Ve.Map)(),t=e.toJSON(),r=t.coordinates,n=t.bufferWidth,a=t.unit;return ft({type:n>0?"DWITHIN":"INTERSECTS",property:"anyGeo",value:{type:"GEOMETRY",value:"POLYGON((".concat(dt(r),"))")}},n>0&&{distance:Ye({distance:n,units:a})},{geojson:{type:"Feature",geometry:{type:"Polygon",coordinates:r},properties:{type:"Polygon",buffer:{width:n,unit:a}}}})}},pointRadius:{label:"Point-Radius",component:function(e){var t=e.value,r=void 0===t?Object(Ve.Map)():t,n=e.onChange,a=e.errors,o=void 0===a?{}:a,l=ut(i.a.useState(0),2),u=l[0],c=l[1],s=ct[u];return i.a.createElement("div",{style:{paddingTop:10}},i.a.createElement(lt.a,{value:u,onChange:function(e,t){c(t)},indicatorColor:"primary",textColor:"primary",variant:"fullWidth","aria-label":"full width tabs example"},i.a.createElement(ot.a,{label:"Lat / Lon (DD)"}),i.a.createElement(ot.a,{label:"Lat / Lon (DMS)"}),i.a.createElement(ot.a,{label:"USNG / MGRS"}),i.a.createElement(ot.a,{label:"UTM / UPS"})),s?i.a.createElement(s,{value:r,onChange:n,errors:o}):null)},validate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(Ve.Map)(),t={},r=e.toJSON(),n=r.lat,a=r.lon,o=r.bufferWidth;return(n<-90||n>90)&&(t.lat="Latitude must be between -90 and 90"),(a<-180||a>180)&&(t.lon="Longitude must be between -180 and 180"),o<0&&(t.bufferWidth="Buffer width must be greater or equal to 0"),t},generateFilter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(Ve.Map)(),t=e.toJSON(),r=t.unit,n=t.bufferWidth,a=t.lat,o=t.lon;return{type:"DWITHIN",property:"anyGeo",value:{type:"GEOMETRY",value:"POINT(".concat(o," ").concat(a,")")},distance:Ye({distance:n,units:r}),geojson:{type:"Feature",geometry:{type:"Point",coordinates:[o,a]},properties:{type:"Point",buffer:{width:n,unit:r}}}}}},boundingBox:{label:"Bounding Box",component:null,validate:function(){return{}},generateFilter:function(){return null}},keyword:{label:"Keyword",component:null,validate:function(){return{}},generateFilter:function(){return null}}},bt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(Ve.Map)(),t=e.get("type");return vt[t].validate(e.get("location"))},gt=function(e){var t=e.value,r=void 0===t?Object(Ve.Map)():t,n=e.onChange,a=e.errors,o=void 0===a?{}:a,l=yt(i.a.useState(Object(Ve.Map)(function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},r.get("type"),r))),2),u=l[0],c=l[1],s=r.get("type"),f=vt[s].component;return i.a.createElement(ke.a,{fullWidth:!0},i.a.createElement(Me.a,null,"Location"),i.a.createElement(He.a,{value:s||"line",onChange:function(e){c(u.set(s,r.get("location"))),n(r.set("type",e.target.value).set("location",u.get(e.target.value)))}},Object.keys(vt).map(function(e){return i.a.createElement(Ne.a,{key:e,value:e},vt[e].label)})),f?i.a.createElement(f,{value:r.get("location"),onChange:function(e){return n(r.set("location",e))},errors:o}):null)};function ht(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Et(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Ot(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(a)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function jt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var wt=r(1),xt=wt.Map,St=wt.Set,Pt=wt.fromJS,Ct=["created","datetime.end","datetime.start","effective","expiration","metacard.created","metacard.modified","metacard.version.versioned-on","modified"],Tt={minutes:function(e){return"RELATIVE(PT".concat(e,"M)")},hours:function(e){return"RELATIVE(PT".concat(e,"H)")},days:function(e){return"RELATIVE(P".concat(e,"D)")},months:function(e){return"RELATIVE(P".concat(e,"M)")},years:function(e){return"RELATIVE(P".concat(e,"Y)")}},kt=xt(Pt({P:{D:"days",M:"months",Y:"years"},PT:{H:"hours",M:"minutes"}})),At=["metadata-content-type","datatype"],qt=function(e){return e.filters?e.filters.reduce(function(e,t){var r=t.property,n=t.value,a=t.filters;if("anyText"===r)return e.set("text",n);if("anyGeo"===r)return e.set("location",xt(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.value.value?e.value.value:e.value,r=xt(e.geojson);return t.includes("POINT")?{type:"pointRadius",location:xt({lon:r.getIn(["geometry","coordinates"])[0],lat:r.getIn(["geometry","coordinates"])[1],bufferWidth:r.getIn(["properties","buffer","width"]),unit:r.getIn(["properties","buffer","unit"])})}:t.includes("POLYGON")?{type:"polygon",location:xt({coordinates:r.getIn(["geometry","coordinates",0]),bufferWidth:r.getIn(["properties","buffer","width"]),unit:r.getIn(["properties","buffer","unit"])})}:t.includes("LINESTRING")?{type:"line",location:xt({coordinates:r.getIn(["geometry","coordinates"]),bufferWidth:r.getIn(["properties","buffer","width"]),unit:r.getIn(["properties","buffer","unit"])})}:void 0}(t)));if(a&&a[0]){if(Ct.includes(a[0].property)){if("="===a[0].type){var o=It(a[0].value),i=o.last,l=o.unit;a[0].last=i,a[0].unit=l}return e.set("timeRange",xt({value:a[0],applyTo:a.map(function(e){return e.property})}))}if(At.includes(a[0].property)){var u=St(a.map(function(e){return e.value})).toJSON();return e.set("datatypes",u)}}return e},xt()):xt(jt({},"text",e.value))},It=function(e){var t=e.match(/RELATIVE\((\D*)(\d*)(\D*)\)/);if(t&&t.length>3){var r=Ot(t,4),n=(r[0],r[1]),a=r[2],o=r[3];return{last:a,unit:kt.getIn([n,o])}}return{}},Dt=function(e){return{type:"AND",filters:[e.has("text")?{type:"ILIKE",property:"anyText",value:e.get("text")}:null,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xt(),t=e.toJSON(),r=t.type,n=t.location;return r&&n?vt[r].generateFilter(n):null}(e.get("location")),function(){var t=e.getIn(["timeRange","applyTo"]),r=e.getIn(["timeRange","value"]);if(!t||!r)return null;if("="===r.type){var n=r.last,a=r.unit;r.value=Tt[a](n)}return{type:"OR",filters:t.map(function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Et(r,!0).forEach(function(t){jt(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Et(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},r,{property:e})})}}(),function(){var t=e.get("datatypes");if(!t||0===t.length)return null;var r=t.map(function(e){return{type:"ILIKE",property:"datatype",value:e}}),n=t.map(function(e){return{type:"ILIKE",property:"metadata-content-type",value:e}});return{type:"OR",filters:[].concat(ht(r),ht(n))}}()].filter(function(e){return null!==e})}},Rt=r(57),Mt=r.n(Rt),Wt=r(33);function Ft(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Lt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ft(r,!0).forEach(function(t){Nt(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ft(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Nt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Bt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(a)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var zt,_t=["minutes","hours","days","months","years"],Ht=function e(t){return void 0!==t&&(null!==t&&("string"==typeof t?e(new Date(t)):t instanceof Date&&!isNaN(t.valueOf())))},Gt=function(e){var t=e.type,r=void 0===t?"BEFORE":t,n=e.value,a=void 0===n?new Date:n,o=e.from,i=void 0===o?new Date:o,l=e.to,u=void 0===l?new Date:l,c=e.last,s=void 0===c?1:c,f=e.unit;return{BEFORE:{type:r,value:a},AFTER:{type:r,value:a},DURING:{type:r,from:i,to:u},"=":{type:r,last:s,unit:void 0===f?"days":f}}[r]},Ut=function(e){return function(t){var r=t.timeRange,n=void 0===r?{}:r,a=t.setTimeRange,o=t.errors,l=void 0===o?{}:o;return i.a.createElement(Vt,{label:e,value:n.value,error:void 0!==l.value,helperText:l.value,onChange:function(e){a({type:n.type,value:e})}})}},Jt=Ut("Limit search to after this time"),Qt=Ut("Limit search to before this time"),Vt=function(e){var t=e.value,r=e.onChange,n=e.label,a=e.error,l=e.helperText,u=Bt(Object(o.useState)(t),2),c=u[0],s=u[1];return i.a.createElement(Wt.MuiPickersUtilsProvider,{utils:Mt.a},i.a.createElement(Wt.KeyboardDatePicker,{error:a,helperText:l,fullWidth:!0,disableToolbar:!0,variant:"inline",format:"MM/dd/yyyy",margin:"normal",id:"date-picker-inline",label:n,value:c,onChange:function(e,t){Ht(e)?r(e.toISOString()):r(""),s(t)},KeyboardButtonProps:{"aria-label":"change date"}}))},$t=function(){return null},Kt={AFTER:Jt,BEFORE:Qt,DURING:function(e){var t=e.timeRange,r=void 0===t?{}:t,n=e.setTimeRange,a=e.errors,o=void 0===a?{}:a;return i.a.createElement("div",{style:{display:"flex",alignItems:"center"}},i.a.createElement(Vt,{label:"From",error:void 0!==o.from,helperText:o.from,value:r.from,onChange:function(e){var t="".concat(e,"/").concat(r.to);n(Lt({},r,{from:e,value:t}))}}),i.a.createElement("div",{style:{width:20}}),i.a.createElement(Vt,{label:"To",error:void 0!==o.to,helperText:o.to,value:r.to,onChange:function(e){r.to=e;var t="".concat(r.from,"/").concat(e);n(Lt({},r,{to:e,value:t}))}}))},"=":function(e){var t=e.timeRange,r=void 0===t?{}:t,n=e.setTimeRange,a=e.errors,o=void 0===a?{}:a;return i.a.createElement("div",{style:{overflow:"auto",flex:"1",paddingTop:10}},i.a.createElement("div",{style:{display:"flex"}},i.a.createElement("div",null,i.a.createElement(Ue.a,{label:"Last",error:void 0!==o.last,variant:"outlined",fullWidth:!0,value:r.last,onChange:function(e){n({type:r.type,last:e.target.value,unit:r.unit})}}),i.a.createElement(qe.a,{error:void 0!==o.last},o.last)),i.a.createElement("div",{style:{width:20}}),i.a.createElement(ke.a,{fullWidth:!0},i.a.createElement(Me.a,null,"Unit"),i.a.createElement(He.a,{value:r.unit,error:void 0!==o.unit,onChange:function(e){n({type:r.type,last:r.last,unit:e.target.value})}},i.a.createElement(Ne.a,{value:"minutes"},"Minutes"),i.a.createElement(Ne.a,{value:"hours"},"Hours"),i.a.createElement(Ne.a,{value:"days"},"Days"),i.a.createElement(Ne.a,{value:"months"},"Months"),i.a.createElement(Ne.a,{value:"years"},"Years")))))}},Yt=function(e){return Kt[e]||$t},Zt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={},r=e.type,n=e.value;switch(r){case void 0:t.type="Type must supplied";break;case"DURING":var a=e.to,o=e.from;Ht(a)||(t.to="'To' date must be a valid date"),Ht(o)||(t.from="'From' date must be a valid date"),o&&a&&o>=a&&(t.to="'To' date must be after 'From' date",t.from="'From' date must be befor 'To' date");break;case"=":var i=e.last,l=e.unit;(isNaN(i)||i<1)&&(t.last="Value must be > 0"),_t.includes(l)||(t.unit="Must include a valid unit");break;default:Ht(n)||(t.value="A valid date must be selected")}return t},Xt=function(e){var t=e.timeRange,r=e.errors,n=void 0===r?{}:r,a=Bt(Object(o.useState)(Object(Ve.Map)(Nt({},t.type,t))),2),l=a[0],u=a[1],c=function(t){"function"==typeof e.setTimeRange&&e.setTimeRange(t),u(l.set(t.type,t))},s=Yt(t.type);return i.a.createElement("div",{style:{overflow:"auto",flex:"1"}},i.a.createElement("div",{style:{display:"flex"}},i.a.createElement(ke.a,{fullWidth:!0},i.a.createElement(Me.a,null,"Time Range"),i.a.createElement(He.a,{error:void 0!==n.type,value:t.type||"",onChange:function(e){var t=e.target.value,r=l.get(t),n=Gt(Lt({},r,{type:t}));c(n)}},i.a.createElement(Ne.a,{value:"AFTER"},"After"),i.a.createElement(Ne.a,{value:"BEFORE"},"Before"),i.a.createElement(Ne.a,{value:"DURING"},"Between"),i.a.createElement(Ne.a,{value:"="},"Relative")),i.a.createElement(qe.a,{error:void 0!==n.type},n.type))),i.a.createElement(s,{type:t.type,timeRange:t,setTimeRange:c,errors:n}))};function er(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(a)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var rr=["created","datetime.end","datetime.start","effective","expiration","metacard.created","metacard.modified","metacard.version.versioned-on","modified"],nr=["Interactive Resource","Moving Image","Still Image","Dataset","Collection","Event","Service","Software","Sound","Text","Image","Physical Object"],ar=function(e){var t=e.text,r=e.handleChange;return i.a.createElement(Ue.a,{fullWidth:!0,label:"Text",variant:"outlined",value:t,onChange:r})},or={location:"Location",timeRange:"Time Range",datatypes:"Match Types",sources:"Sources"},ir=function(e){var t=e.addFilter,r=tr(i.a.useState(null),2),n=r[0],a=r[1];function o(){a(null)}return i.a.createElement(i.a.Fragment,null,i.a.createElement(s.a,{onClick:function(e){a(e.currentTarget)},style:{marginLeft:"20px"}},"Add Filters"),i.a.createElement(Fe.a,{anchorEl:n,keepMounted:!0,open:Boolean(n),onClose:o},Object.keys(or).map(function(e){return i.a.createElement(Ne.a,{key:e,value:e,onClick:function(){t(e),o()}},or[e])})))},lr=function(e){return i.a.createElement(s.a,{style:e.style,fullWidth:!0,variant:"contained",color:"primary",onClick:e.onSearch},"Search")},ur=function(e){var t=e.attributes,r=void 0===t?[]:t,n=e.setAttributes,a=e.errors,o=void 0===a?{}:a;return i.a.createElement(ke.a,{fullWidth:!0},i.a.createElement(Me.a,null,"Apply Time Range To"),i.a.createElement(He.a,{error:void 0!==o.applyTo,multiple:!0,value:r,onChange:function(e){return n(e.target.value)},input:i.a.createElement(De.a,null),renderValue:function(e){return e.join(", ")}},rr.map(function(e){return i.a.createElement(Ne.a,{key:e,value:e},i.a.createElement(Se.a,{checked:r.indexOf(e)>-1}),i.a.createElement(pe.a,{primary:e}))})),i.a.createElement(qe.a,{error:void 0!==o.applyTo},o.applyTo))},cr=(er(zt={},"location",function(e){var t=e.state,r=void 0===t?Object(Ve.Map)():t,n=e.setState,a=e.errors;return i.a.createElement(gt,{value:r,onChange:n,errors:a.locationErrors})}),er(zt,"timeRange",function(e){var t=e.state,r=void 0===t?Object(Ve.Map)():t,n=e.setState,a=e.errors;return i.a.createElement("div",{style:{flex:"1",overflow:"hidden"}},i.a.createElement(Xt,{errors:a.timeRangeErrors,fullWidth:!0,timeRange:r.get("value"),setTimeRange:function(e){var t=r.set("value",e);n(t)}}),i.a.createElement(ke.a,{fullWidth:!0},i.a.createElement(ur,{attributes:r.get("applyTo"),errors:a.attributeSelectorErrors,setAttributes:function(e){var t=r.set("applyTo",e);n(t)}})))}),er(zt,"datatypes",function(e){var t=e.state,r=void 0===t?[]:t,n=e.setState,a=e.errors,o=void 0===a?{}:a;return o=o.matchTypesErrors||{},i.a.createElement(ke.a,{fullWidth:!0},i.a.createElement(Me.a,null,"Match Types"),i.a.createElement(He.a,{error:void 0!==o.datatypes,multiple:!0,value:r,onChange:function(e){return n(e.target.value)},renderValue:function(e){return e.join(", ")}},nr.map(function(e){return i.a.createElement(Ne.a,{key:e,value:e},i.a.createElement(Se.a,{checked:r.indexOf(e)>-1}),i.a.createElement(pe.a,{primary:e}))})),i.a.createElement(qe.a,{error:void 0!==o.datatypes},o.datatypes))}),er(zt,"sources",function(e){var t=e.state,r=void 0===t?["ddf.distribution"]:t,n=e.setState;return i.a.createElement(ke.a,{fullWidth:!0},i.a.createElement(Me.a,null,"Sources"),i.a.createElement(He.a,{multiple:!0,value:r,onChange:function(e){return n(e.target.value)},renderValue:function(e){return e.join(", ")}},["ddf.distribution","csw","opensearch"].map(function(e){return i.a.createElement(Ne.a,{key:e,value:e},i.a.createElement(Se.a,{checked:r.indexOf(e)>-1}),i.a.createElement(pe.a,{primary:e}))})))}),zt),sr=er({timeRange:Object(Ve.Map)({value:Gt({type:"BEFORE"}),applyTo:["created"]})},"location",Object(Ve.Map)({type:"line"})),fr=function(e){var t=tr(i.a.useState(function(e){return e.query&&e.query.filterTree?qt(e.query.filterTree):Object(Ve.Map)({text:"*"})}(e)),2),r=t[0],n=t[1],a=tr(i.a.useState(!1),2),o=a[0],l=a[1],u=dr(r),c=r.get("text");return i.a.createElement(ze.a,{style:{overflow:"auto",maxWidth:600,maxHeight:"100%"}},i.a.createElement("div",{style:{display:"flex",alignItems:"center",padding:20,boxSizing:"border-box"}},i.a.createElement(ar,{text:c,handleChange:function(e){return n(r.set("text",e.target.value))}}),i.a.createElement(ir,{addFilter:function(e){n(r.merge(er({},e,sr[e])))}})),r.remove("text").map(function(e,t){var a=cr[t];return i.a.createElement("div",{key:t,style:{width:"100%"}},i.a.createElement(_.a,{style:{marginBottom:15,marginTop:10}}),i.a.createElement("div",{style:{display:"flex",alignItems:"center",padding:20,boxSizing:"border-box"}},i.a.createElement("div",{style:{marginRight:20}},i.a.createElement(Ce.a,{size:"small",color:"secondary",onClick:function(){n(r.remove(t))}},i.a.createElement(Qe.a,null))),i.a.createElement(a,{state:e,setState:function(e){n(r.set(t,e))},errors:o?u:{}})))}).valueSeq(),i.a.createElement(lr,{fullWidth:!0,style:{marginTop:20},onSearch:function(){l(!0),mr(u)&&e.onSearch(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["ddf.distribution"];return{srcs:t,start:1,count:250,filterTree:e,sorts:[{attribute:"modified",direction:"descending"}],spellcheck:!1,phonetics:!1}}(Dt(r),r.get("sources")))}}))},mr=function(e){return 0===Object.keys(e).length},pr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={};return 0===e.length&&(t.applyTo="Must choose at least one attribute"),t},dr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(Ve.Map)(),t={};if(e.has("location")){var r=bt(e.getIn(["location"]));mr(r)||(t.locationErrors=r)}if(e.has("timeRange")){var n=Zt(e.getIn(["timeRange","value"]));mr(n)||(t.timeRangeErrors=n);var a=pr(e.getIn(["timeRange","applyTo"]));mr(a)||(t.attributeSelectorErrors=a)}if(e.has("datatypes")){var o=(e.getIn(["datatypes"]),{});mr(o)||(t.matchTypesErrors=o)}return t};function yr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(a)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var vr=function(e){var t=yr(Object(o.useState)(!1),2),r=t[0],n=t[1];return Object(o.useEffect)(function(){var t=function(t){t.key===e&&n(!0)},r=function(t){t.key===e&&n(!1)};return document.addEventListener("keydown",t),document.addEventListener("keyup",r),function(){document.removeEventListener("keydown",t),document.removeEventListener("keyup",r)}},[e]),r};function br(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(a)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var gr=function(e){var t=br(Object(o.useState)(function(){return Object(Ve.Map)({current:0,history:Object(Ve.List)([e])})}),2),r=t[0],n=t[1],a=r.get("history"),i=r.get("current"),l=a.get(i),u=Object(o.useCallback)(function(e){if(!Object(Ve.is)(l,e)){var t=r.update("current",function(e){return e+1}).update("history",function(t){return t.slice(0,r.get("current")+1).push(e)});n(t)}},[r,n,l]),c=i>0,s=Object(o.useCallback)(function(){c&&n(r.update("current",function(e){return e-1}))},[r,n,c]),f=i<a.size-1,m=Object(o.useCallback)(function(){f&&n(r.update("current",function(e){return e+1}))},[r,n,f]);return{state:l,setState:u,canUndo:c,onUndo:s,canRedo:f,onRedo:m}},hr=i.a.createContext(),Er=function(){return Object(o.useContext)(hr)};function Or(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function jr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Or(r,!0).forEach(function(t){wr(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Or(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function wr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xr(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Sr(e,t,r,n,a,o,i){try{var l=e[o](i),u=l.value}catch(e){return void r(e)}l.done?t(u):Promise.resolve(u).then(n,a)}function Pr(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function i(e){Sr(o,n,a,i,l,"next",e)}function l(e){Sr(o,n,a,i,l,"throw",e)}i(void 0)})}}function Cr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(a)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Tr(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  query SimpleSearch($filterTree: Json!, $settings: QuerySettingsInput) {\n    metacards(filterTree: $filterTree, settings: $settings) {\n      results {\n        actions {\n          id\n          url\n          title\n          displayName\n        }\n        metacard\n      }\n      status {\n        count\n        hits\n        elapsed\n      }\n    }\n  }\n"]);return Tr=function(){return e},e}var kr=function(e,t){switch(t.type){case"clear":return e.clear();case"start":return e.merge(t.status);case"success":return e.set(t.src,{type:"source.success",info:t.status});case"cancel":return e.set(t.src,{type:"source.canceled"});case"error":return e.set(t.src,{type:"source.error",info:{message:"source error"}});default:return e}},Ar=function(e,t){switch(t.type){case"clear":return[];case"success":return t.results;default:return e}},qr=function(e,t){return"source.canceled"===e.status.get(t.src,{type:""}).type?e:{status:kr(e.status,t),results:Ar(e.results,t)}},Ir=B()(Tr()),Dr=function(){var e=Object(L.useApolloClient)(),t=Cr(Object(o.useReducer)(qr,{results:[],status:Object(Ve.Map)()}),2),r=t[0],n=t[1],a=Object(o.useCallback)(function(e){n({type:"error",src:e})},[n]),i=Object(o.useCallback)(function(){n({type:"clear"})},[n]),l=Object(o.useCallback)(function(e){n({type:"cancel",src:e})},[n]),u=Object(o.useCallback)(function(e,t){n({type:"success",src:e,status:t.metacards.status,results:t.metacards.results})},[n]),c=Object(o.useCallback)(function(){var t=Pr(regeneratorRuntime.mark(function t(r){var o,i,l,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:o=r.filterTree,i=r.srcs,l=xr(r,["filterTree","srcs"]),c=i.reduce(function(e,t){return e.set(t,{type:"source.pending"})},Object(Ve.Map)()),n({type:"start",status:c}),i.map(function(){var t=Pr(regeneratorRuntime.mark(function t(r){var n,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.query({query:Ir,variables:{filterTree:o,settings:jr({src:r},l)},fetchPolicy:"network-only"});case 3:n=t.sent,i=n.data,u(r,i),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),a(r);case 11:case"end":return t.stop()}},t,null,[[0,8]])}));return function(e){return t.apply(this,arguments)}}());case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),[e,u,a]);return{results:r.results,status:r.status.toJSON(),onSearch:c,onCancel:l,onClear:i}},Rr=r(58),Mr=r.n(Rr),Wr=r(59),Fr=r.n(Wr),Lr=r(34),Nr=r.n(Lr),Br=r(35),zr=r.n(Br),_r=r(60),Hr=r.n(_r),Gr=r(61),Ur=r.n(Gr),Jr=r(62),Qr=r.n(Jr),Vr=r(63),$r=r.n(Vr),Kr=r(64),Yr=r.n(Kr);function Zr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(a)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Xr=function(e){var t=e.src,r=Zr(Object(o.useState)("loading"),2),n=r[0],a=r[1];return i.a.createElement(i.a.Fragment,null,"loading"===n?i.a.createElement($r.a,{variant:"rect",height:"100px"}):null,i.a.createElement("img",{style:{display:"success"===n?"block":"none",maxHeight:100,maxWidth:150},src:t,onLoad:function(){return a("success")},onError:function(){return a("failed")}}),"failed"===n?i.a.createElement(Yr.a,{fontSize:"large"}):null)};function en(){return(en=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function tn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function rn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tn(r,!0).forEach(function(t){nn(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tn(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function nn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function an(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(a)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var on={minWidth:150,maxWidth:450},ln=function(e){var t=e.expanded,r=e.onClick;return i.a.createElement(s.a,{style:{minWidth:25,marginLeft:5,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},onClick:r},t?i.a.createElement(Qr.a,null):i.a.createElement(Ur.a,null))},un=function(e){var t=an(Object(o.useState)(!1),2),r=t[0],n=t[1],a=e.text,l=a.length>250;return i.a.createElement("div",{style:rn({},on,{display:"flex",width:"20vw",alignItems:"stretch"})},i.a.createElement(g.a,null,!l||r?a:a.substring(0,100).concat("...")),l?i.a.createElement(ln,{expanded:r,onClick:function(e){e.stopPropagation(),n(!r)}}):null)},cn=function(e){return e.metacard.properties.id},sn=function(e){var t=e.attributes,r=e.selected,n=e.onClick,a=e.Thumbnail,o=e.result,l=cn(o);return i.a.createElement(Nr.a,{onClick:n,key:l,selected:r},t.map(function(e){return i.a.createElement(zr.a,{key:e},function(e,t,r){var n=t.metacard.properties;switch(e){case"thumbnail":return i.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"}},i.a.createElement(r,{result:t}));case"description":return i.a.createElement(un,{text:n.description});default:return i.a.createElement(g.a,{style:rn({},on)},n[e])}}(e.toLowerCase(),o,a))}))},fn=function(e){var t=(e.result.actions.find(function(e){return"catalog.data.metacard.thumbnail"===e.id})||{}).url;return i.a.createElement(Xr,{src:t})},mn=function(e){var t=e.results,r=e.attributes,n=e.onSelect,a=e.Thumbnail,l=void 0===a?fn:a,u=Object(Ve.Set)(e.selection),c=an(Object(o.useState)(null),2),s=c[0],f=c[1],m=!vr("Shift");return i.a.createElement(G.a,{style:{overflow:"auto",maxHeight:"100%"}},i.a.createElement(Mr.a,null,i.a.createElement(Fr.a,null,i.a.createElement(Nr.a,null,r.map(function(e){return i.a.createElement(zr.a,{key:e},i.a.createElement(g.a,null,e))}))),i.a.createElement(Hr.a,{style:{userSelect:m?"auto":"none"}},t.map(function(e,a){var o=cn(e);return i.a.createElement(sn,{key:o,result:e,Thumbnail:l,attributes:r,selected:u.has(o),onClick:function(e){e.stopPropagation();var r=function(e,t,r,n,a){var o=cn(t[n]);if(a.ctrlKey||a.metaKey)return e.has(o)?e.remove(o):e.add(o);if(a.shiftKey&&null!==r){var i=r<n?t.slice(r,n+1):t.slice(n,r+1);return Object(Ve.Set)(i.map(function(e){return cn(e)})).union(e)}return e.has(o)?Object(Ve.Set)():Object(Ve.Set)([cn(t[n])])}(u,t,s,a,e);n(r),f(e.shiftKey?s:a)}})}))))},pn=function(e){var t=an(Er(),2),r=t[0],n=t[1];return i.a.createElement(mn,en({},e,{selection:r,onSelect:n}))},dn=r(65),yn=r.n(dn),vn=r(66),bn=r.n(vn),gn=r(67),hn=r.n(gn),En=r(68),On=r.n(En),jn=r(69),wn=r.n(jn),xn=r(30),Sn=r.n(xn),Pn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unknown",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("source.canceled"===e||"source.error"===e)return i.a.createElement(g.a,{variant:"subtitle2",color:"secondary"},i.a.createElement(Sn.a,{container:!0,alignItems:"center",spacing:1},i.a.createElement(Sn.a,{item:!0},i.a.createElement(wn.a,{style:{height:"0.8em"}})),i.a.createElement(Sn.a,{item:!0},t.message||e)));if("source.success"===e){var r=t.hits,n=t.count,a=t.elapsed;return i.a.createElement(g.a,{variant:"subtitle2",color:"textSecondary"},"Available: ",n,", Possible: ",r,", Time: ",a,"ms")}return i.a.createElement(g.a,{variant:"subtitle2",color:"textSecondary"},e)},Cn=function(e){var t=e.onCancel;return i.a.createElement("div",{style:{position:"relative"}},i.a.createElement(d.a,{key:"cancel",title:"Cancel",color:"secondary",onClick:t},i.a.createElement(yn.a,null)),i.a.createElement("div",{style:{zIndex:-1,position:"absolute",left:0,right:0,top:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center"}},i.a.createElement(bn.a,{size:30})))},Tn=function(e){var t=e.onRun;return i.a.createElement(d.a,{key:"run",title:"Run",color:"primary",onClick:t},i.a.createElement(On.a,null))},kn=function(e){var t=e.type,r=e.info,n=e.source,a=e.onRun,o=e.onCancel;return i.a.createElement(ce.a,null,i.a.createElement(pe.a,{primary:n,secondary:Pn(t,r)}),i.a.createElement(hn.a,null,"source.pending"===t?i.a.createElement(Cn,{onCancel:function(){return o([n])}}):i.a.createElement(Tn,{onRun:function(){return a([n])}})))},An=function(e){var t=e.sources,r=void 0===t?{}:t;return i.a.createElement(le.a,null,Object.keys(r).map(function(t){var n=r[t],a=n.type,o=n.info;return i.a.createElement(kn,{key:t,source:t,info:o,type:a,onRun:e.onRun,onCancel:e.onCancel})}))},qn=r(25),In=r.n(qn),Dn=r(70),Rn=r.n(Dn),Mn=r(71),Wn=r.n(Mn);function Fn(){return(Fn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Ln(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  query InspectorSummaryShow {\n    systemProperties {\n      summaryShow\n    }\n  }\n"]);return Ln=function(){return e},e}function Nn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(a)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Bn(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function zn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Hn=function(e){var t=e.title,r=e.value,n=r instanceof Array?r.length:1,a=r instanceof Array?r:[r],o=n>1?" (".concat(n," values)"):"";return i.a.createElement("div",null,i.a.createElement(g.a,{variant:"h6",component:"h2"},t,o),a.map(function(e){return i.a.createElement(g.a,{key:e,color:"textSecondary",gutterBottom:!0},e)}))},Gn=function(e){var t=e.title,r=e.values;return i.a.createElement("div",{style:{width:"100%"}},i.a.createElement(g.a,{variant:"h6",component:"h2"},t),r.map(function(e,t,r){return i.a.createElement(ce.a,{key:t,divider:t<r.length-1},i.a.createElement(Hn,{title:"",value:e}))}))},Un=function(e){var t=e.results,r=Vn(t);return Array.from(r).sort().map(function(e){var r=t.map(function(t){return t.metacard.properties[e]||"No Value"});return i.a.createElement("div",{key:e},i.a.createElement(ce.a,{divider:!0},i.a.createElement(Gn,{title:e,values:r})))})},Jn=function(e){var t=e.properties;return Object.entries(t).sort().map(function(e){var t=e[0],r=e[1];return i.a.createElement("div",{key:t},i.a.createElement(ce.a,{divider:!0},i.a.createElement(Hn,{title:t,value:r})))})},Qn=function(e){var t=e.title,r=e.actions;return 0===r.length?null:i.a.createElement("div",{style:{width:"100%"}},i.a.createElement(g.a,{variant:"h6",component:"h2"},t),r.map(function(e){return i.a.createElement(ce.a,{key:e.id},i.a.createElement(g.a,{color:"textSecondary",gutterBottom:!0},i.a.createElement(Wn.a,{href:e.url}," ",e.displayName," ")))}))},Vn=function(e){return e.reduce(function(e,t){var r=t.metacard.properties,n=Object.keys(r);return new Set([].concat(Bn(e),Bn(n)))},new Set)},$n={0:function(e){var t=e.results,r=e.summaryAttributes,n={"":"No summary attributes were provided."};if(r&&r.length){var a=(t instanceof Array?t[0]:t).metacard.properties;n=r.map(function(e){var t=a[e];return null!=t?_n({},e,t):{}}).reduce(function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?zn(r,!0).forEach(function(t){_n(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zn(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e,{},t)},{})}return i.a.createElement(G.a,null,i.a.createElement(le.a,null,i.a.createElement(Jn,{properties:n})))},1:function(e){var t=e.results,r=t instanceof Array?t[0]:t;return i.a.createElement(G.a,null,i.a.createElement(le.a,null,i.a.createElement(Jn,{properties:r.metacard.properties})))},2:function(e){var t=e.results,r=t instanceof Array?t[0]:t,n=r.actions;if(n&&n.length){var a=function(e){var t=e.filter(function(e){return 0===e.id.indexOf("catalog.data.metacard.map.")}),r=e.filter(function(e){return 0===e.title.indexOf("Export")}).filter(function(e){return-1===t.indexOf(e)}),n=e.filter(function(e){return-1===t.indexOf(e)&&-1===r.indexOf(e)});return{exportActions:r,mapActions:t,otherActions:n}}(r.actions);return i.a.createElement(G.a,null,i.a.createElement(le.a,{style:{marginLeft:"10px"}},i.a.createElement(Qn,{title:"Export as:",actions:a.exportActions}),i.a.createElement(_.a,null),i.a.createElement(Qn,{title:"Map:",actions:a.mapActions}),i.a.createElement(_.a,null),i.a.createElement(Qn,{title:"Various:",actions:a.otherActions})))}return i.a.createElement(G.a,null,i.a.createElement(le.a,{style:{marginLeft:"10px"}},i.a.createElement(g.a,{variant:"h6",component:"h2"},"No actions provided")))}},Kn={0:function(e){var t=e.results;return i.a.createElement(G.a,null,i.a.createElement(g.a,{variant:"h6",component:"h2",fullWidth:!0,style:{textAlign:"center"}},t.length," results selected"),i.a.createElement(le.a,null,i.a.createElement(Un,{results:t})))}},Yn=function(e){var t=Nn(i.a.useState(0),2),r=t[0],n=t[1],a=$n[r];return i.a.createElement("div",{style:{paddingTop:10}},i.a.createElement(lt.a,{value:r,onChange:function(e,t){n(t)},indicatorColor:"primary",textColor:"primary",variant:"fullWidth"},i.a.createElement(ot.a,{label:"Summary"}),i.a.createElement(ot.a,{label:"Details"}),i.a.createElement(ot.a,{label:"Actions"})),a?i.a.createElement(a,e):null)},Zn=function(e){var t=Nn(i.a.useState(0),2),r=t[0],n=t[1],a=Kn[r];return i.a.createElement("div",{style:{paddingTop:10}},i.a.createElement(lt.a,{value:r,onChange:function(e,t){n(t)},indicatorColor:"primary",textColor:"primary",variant:"fullWidth"},i.a.createElement(ot.a,{label:"Details"})),a?i.a.createElement(a,e):null)},Xn=["created","modified","thumbnail"],ea=function(e){var t=e.results,r=e.summaryAttributes,n=void 0===r?Xn:r,a=function(e){return e instanceof Array&&e.length>1?Zn:Yn}(t);return t&&t.length?i.a.createElement(a,{results:t,summaryAttributes:n}):i.a.createElement(Jn,{properties:{"":"No results were provided."}})},ta=B()(Ln()),ra=function(){return i.a.createElement(G.a,null,i.a.createElement(K.a,null))},na=function(e){var t=Object(L.useQuery)(ta),r=t.loading,n=t.error,a=t.data,o=void 0===a?{}:a;if(r)return i.a.createElement(ra,null);var l=o.systemProperties.summaryShow;return i.a.createElement(ea,Fn({},e,{error:n,summaryAttributes:l}))},aa=function(e){var t=function(e,t){try{return Object(L.useApolloClient)(),e}catch(e){return t}}(na,ea);return i.a.createElement(t,e)};function oa(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ia(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function la(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(a)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var ua=function(e){var t=la(Object(o.useState)(void 0),2),r=t[0],n=t[1],a=e.results,l=e.status,u=e.onSearch,c=e.onCancel,f=e.onClear,m=e.selectedResults,p=la(Object(o.useState)(10),2),d=p[0],y=p[1],v=la(Object(o.useState)(0),2),b=v[0],h=v[1],E=function(e,t,r){var n=t*r,a=n+r;return e.slice(n,a)}(a,b,d),O=la(Object(o.useState)(!1),2),j=O[0],w=O[1];return i.a.createElement("div",{style:{margin:"0 auto",padding:20,boxSizing:"border-box",height:"calc(100% - 64px)",display:"flex",flexDirection:"column"}},i.a.createElement(g.a,{variant:"h4",style:{marginBottom:20}},"Simple Search"),i.a.createElement("div",{style:{display:"flex",overflow:"hidden",padding:1,boxSizing:"border-box",flex:"1"}},i.a.createElement("div",{style:{width:360,minWidth:360}},i.a.createElement(fr,{onSearch:function(e){h(0),n(e),f(),u(e)}}),i.a.createElement(An,{sources:l,onRun:function(e){h(0),u(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oa(r,!0).forEach(function(t){ia(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oa(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},r,{srcs:e}))},onCancel:function(e){e.forEach(function(e){c(e)})}})),i.a.createElement("div",{style:{minWidth:20}}),i.a.createElement("div",{style:{display:"flex",flex:"1",flexDirection:"column"}},i.a.createElement("div",{style:{marginBottom:10,textAlign:"right"}},i.a.createElement(s.a,{variant:"outlined",onClick:function(){w(!0)}},"Open Inspector")),j?i.a.createElement(In.a,{open:!0,onClose:function(){w(!1)}},i.a.createElement(aa,{results:m})):null,i.a.createElement(pn,{results:E,attributes:["title","created"]}),i.a.createElement(Rn.a,{count:a.length,page:b,component:"div",rowsPerPage:d,onChangePage:function(e,t){h(t)},onChangeRowsPerPage:function(e){h(0),y(e.target.value)}}))))},ca=function(){var e=la(Er(),1)[0],t=Dr(),r=t.results,n=t.status,a=t.onSearch,o=t.onCancel,l=t.onClear,u=r.filter(function(t){return e.has(t.metacard.properties.id)});return i.a.createElement(ua,{results:r,status:n,onSearch:a,onCancel:o,onClear:l,selectedResults:u})},sa=r(72),fa=r.n(sa),ma=r(73),pa=r.n(ma),da=r(74),ya=r.n(da);function va(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function ba(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(a)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var ga=function(e){var t=ba(Object(o.useState)(""),2),r=t[0],n=t[1],a=e.title,l=e.attributes,u=void 0===l?[]:l,c=e.onSelect,s=u.filter(function(e){return e.match(r)});return i.a.createElement("div",{style:{maxHeight:"100%",flex:"1",alignItems:"stretch"}},i.a.createElement(G.a,{style:{display:"flex",flexDirection:"column",height:"100%",boxSizing:"border-box"}},i.a.createElement(J.a,{style:{paddingBottom:0}},i.a.createElement(g.a,{variant:"h6",color:"textSecondary"},a,s.length!==u.length?" (".concat(s.length,"/").concat(u.length," visible)"):null),i.a.createElement(Ue.a,{fullWidth:!0,value:r,onChange:function(e){return n(e.target.value)},placeholder:"type to filter..."})),i.a.createElement(le.a,{dense:!0,style:{flex:"1",overflow:"auto"}},s.map(function(e){return i.a.createElement(ce.a,{key:e,button:!0,onClick:function(){return c([e])}},i.a.createElement(pe.a,{primary:e}))}))))},ha=function(e){var t=e.canUndo,r=e.onUndo,n=e.canRedo,a=e.onRedo;return i.a.createElement("div",null,i.a.createElement(s.a,{variant:"outlined",onClick:r,disabled:!t},i.a.createElement(ya.a,null)," Undo"),i.a.createElement("div",{style:{width:10,display:"inline-block"}}),i.a.createElement(s.a,{variant:"outlined",onClick:a,disabled:!n},i.a.createElement(pa.a,null)," Redo"))},Ea=function(e){var t=e.state,r=e.setState,n=e.attributes,a=void 0===n?[]:n,o=va(e,["state","setState","attributes"]),l=a.filter(function(e){return t.has(e)}),u=a.filter(function(e){return!t.has(e)});return i.a.createElement("div",{style:{display:"flex",flexDirection:"column",height:"100%",maxHeight:"100%",boxSizing:"border-box",overflow:"hidden"}},i.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:3,marginBottom:10}},i.a.createElement("div",null,i.a.createElement(fa.a,{required:e.required,error:e.error},e.label),i.a.createElement(qe.a,{error:e.error},e.helperText)),i.a.createElement(ha,o)),i.a.createElement("div",{style:{display:"flex",flex:"1",overflow:"hidden",padding:3}},i.a.createElement(ga,{title:"Available",attributes:u,onSelect:function(e){return r(t.union(e))}}),i.a.createElement("div",{style:{width:20}}),i.a.createElement(ga,{title:"Selected",attributes:l,onSelect:function(e){return r(t.subtract(e))}})))};function Oa(){return(Oa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ja(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function wa(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ja(r,!0).forEach(function(t){xa(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ja(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function xa(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Sa(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(a)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Pa(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var Ca=Object(o.memo)(Ea),Ta=function(e){var t=e.form,r=void 0===t?{}:t,n=e.attributes,a=void 0===n?[]:n,l=e.onCancel,u=e.onSave,c=gr(Object(Ve.Set)(r.attributes)),f=c.state,m=c.setState,p=Pa(c,["state","setState"]),d=Sa(Object(o.useState)(r.title||""),2),y=d[0],v=d[1],b=Sa(Object(o.useState)(r.description||""),2),g=b[0],h=b[1],E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.title,r=e.description,n=Object(Ve.Set)(e.attributes),a={};return"string"!=typeof t?a.title="Title must be string":""===t.trim()&&(a.title="Title must not be empty"),void 0!==r&&"string"!=typeof r&&(a.description="Description must be string"),n.isEmpty()&&(a.attributes="Attributes cannot be empty"),a}({title:y,description:g,attributes:f}),O=Sa(Object(o.useState)(!1),2),j=O[0],w=O[1];return i.a.createElement("div",{style:wa({display:"flex",flexDirection:"column",height:"100%",maxHeight:"100%",padding:20,boxSizing:"border-box"},e.style)},i.a.createElement(Ue.a,{autoFocus:!0,required:!0,fullWidth:!0,label:"Title",style:{marginBottom:20},value:y,error:j&&void 0!==E.title,helperText:j?E.title:void 0,onChange:function(e){return v(e.target.value)}}),i.a.createElement(Ue.a,{fullWidth:!0,rows:2,multiline:!0,label:"Description",style:{marginBottom:30},value:g,onChange:function(e){return h(e.target.value)}}),i.a.createElement(Ca,Oa({state:f,setState:m,label:"Attributes",required:!0,attributes:a,error:j&&void 0!==E.attributes,helperText:j?E.attributes:void 0},p)),i.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:20}},i.a.createElement(s.a,{variant:"outlined",color:"secondary",onClick:l},"Cancel"),i.a.createElement("div",{style:{width:10,display:"inline-block"}}),i.a.createElement(s.a,{variant:"contained",color:"primary",onClick:function(){if(0===Object.keys(E).length){var e={id:r.id,title:y,description:g,attributes:f.toJSON()};u(e)}else w(!0)}},"Save")))},ka=r(75),Aa=r.n(ka),qa=r(76),Ia=r.n(qa),Da=r(77),Ra=r.n(Da),Ma=r(78),Wa=r.n(Ma),Fa=r(79),La=r.n(Fa),Na=r(80),Ba=r.n(Na),za=r(81),_a=r.n(za),Ha=r(82),Ga=r.n(Ha),Ua=r(83),Ja=r.n(Ua),Qa=r(84),Va=r.n(Qa),$a=r(85),Ka=r.n($a);function Ya(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Za(){return(Za=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Xa(){var e=oo(["\n  query ResultFormAttributes {\n    metacardTypes {\n      id\n    }\n  }\n"]);return Xa=function(){return e},e}function eo(){var e=oo(["\n    mutation DeleteSearchForms($id: ID!) {\n      deleteMetacard(id: $id)\n    }\n  "]);return eo=function(){return e},e}function to(){var e=oo(["\n    mutation SaveSearchForms($id: ID!, $attrs: MetacardAttributesInput!) {\n      saveMetacard(id: $id, attrs: $attrs) {\n        ...ResultFormAttributes\n      }\n    }\n    ","\n  "]);return to=function(){return e},e}function ro(){var e=oo(["\n    mutation CreateSearchForms($attrs: MetacardAttributesInput!) {\n      createMetacard(attrs: $attrs) {\n        ...ResultFormAttributes\n        owner: metacard_owner\n      }\n    }\n    ","\n  "]);return ro=function(){return e},e}function no(){var e=oo(['\n  query SearchForms {\n    metacardsByTag(tag: "attribute-group") {\n      attributes {\n        ...ResultFormAttributes\n        owner: metacard_owner\n      }\n    }\n  }\n  ',"\n"]);return no=function(){return e},e}function ao(){var e=oo(["\n  fragment ResultFormAttributes on MetacardAttributes {\n    id\n    title\n    description\n    modified: metacard_modified\n    attributes: ui_attribute_group\n  }\n"]);return ao=function(){return e},e}function oo(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function io(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(a)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function lo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function uo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?lo(r,!0).forEach(function(t){co(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lo(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function co(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var so=function(){return i.a.createElement("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"}},i.a.createElement(K.a,{style:{width:"25vw",height:10}}))},fo=function(e){var t=e.children,r=e.style,n=e.onClick;return i.a.createElement(o.Fragment,null,i.a.createElement(G.a,{style:uo({width:345,margin:20,cursor:"pointer"},r),onClick:n},t))},mo=function(e){var t=e.onCreate,r=e.Editor,n=io(Object(o.useState)(!1),2),a=n[0],l=n[1];return i.a.createElement(o.Fragment,null,a?i.a.createElement(In.a,{open:!0},i.a.createElement(r,{onSave:function(e){l(!1),t(e)},onCancel:function(){l(!1)}})):null,i.a.createElement(fo,{style:{display:"flex",alignItems:"center",justifyContent:"center"},onClick:function(){return l(!0)}},i.a.createElement(Ia.a,{style:{width:"50%",height:"50%"}})))},po=function(e){var t=io(Object(o.useState)(!1),2),r=t[0],n=t[1],a=e.children,l=e.onDelete;return i.a.createElement(o.Fragment,null,r?i.a.createElement(In.a,{open:!0,onClick:function(e){return e.stopPropagation()},onClose:function(){return n(!1)}},i.a.createElement(Ba.a,null,"Are you sure?"),i.a.createElement(Wa.a,null,i.a.createElement(La.a,null,a)),i.a.createElement(Ra.a,{style:{textAlign:"center"}},i.a.createElement(s.a,{variant:"outlined",color:"primary",onClick:function(){n(!1)}},"Cancel"),i.a.createElement(s.a,{color:"secondary",variant:"contained",onClick:function(){l(),n(!1)}},"Delete"))):null,i.a.createElement(d.a,{onClick:function(e){e.stopPropagation(),n(!0)}},i.a.createElement(Ga.a,null)))},yo=function(e){var t=e.form,r=e.Editor,n=e.onDelete,a=io(Object(o.useState)(!1),2),l=a[0],u=a[1];return i.a.createElement(o.Fragment,null,l?i.a.createElement(In.a,{open:!0},i.a.createElement(r,{form:t,onSave:function(t){u(!1),e.onSave(t)},onCancel:function(){u(!1)}})):null,i.a.createElement(fo,{onClick:function(){return u(!0)}},i.a.createElement(Aa.a,{title:t.title,subheader:Ka()(t.modified).fromNow()}),i.a.createElement(J.a,null,i.a.createElement(g.a,{variant:"body2",color:"textSecondary",component:"p"},"Owner: ",t.owner)),i.a.createElement(V.a,null,i.a.createElement(d.a,{onClick:function(e){e.stopPropagation()}},i.a.createElement(_a.a,null)),i.a.createElement(po,{onDelete:n},"This will permanently delete the search form."))))},vo=function(e){var t=e.message,r=e.autoHideDuration,n=void 0===r?5e3:r,a=e.onClose;return i.a.createElement(Ja.a,{open:!0,autoHideDuration:n,onClose:a,anchorOrigin:{vertical:"bottom",horizontal:"right"}},i.a.createElement(Va.a,{message:t}))},bo=function(e){var t=io(Object(o.useState)(null),2),r=t[0],n=t[1],a=e.loading,l=e.error,u=e.forms,c=e.Editor,s=e.onCreate,f=e.onSave,m=e.onDelete;return a?i.a.createElement(so,null):l?i.a.createElement("div",null,"Error"):i.a.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},r?i.a.createElement(vo,{message:r,onClose:function(){return n(null)}}):null,i.a.createElement(mo,{Editor:c,onCreate:function(){s.apply(void 0,arguments),n("Result Form Created")}}),u.concat().sort(function(e,t){return e.modified>t.modified?-1:1}).map(function(e){return i.a.createElement(yo,{key:e.id,Editor:c,onSave:function(){f.apply(void 0,arguments),n("Result Form Saved")},onDelete:function(){m(e),n("Result Form Deleted")},form:e})}))},go=B()(ao()),ho=B()(no(),go),Eo=B()(Xa()),Oo=function(e){var t=e.form,r=e.attributes,n=e.loading,a=e.error,o=e.onCancel,l=e.onSave;return n?i.a.createElement(so,null):a?i.a.createElement("div",null,"Error"):i.a.createElement(Ta,{style:{maxHeight:"60vh"},form:t,attributes:r,onCancel:o,onSave:l})},jo=function(e){var t=Object(L.useQuery)(Eo),r=t.loading,n=t.error,a=t.data,o=r?[]:a.metacardTypes.map(function(e){return e.id});return i.a.createElement(Oo,Za({loading:r,error:n,attributes:o},e))},wo=r(86),xo=r.n(wo),So=r(87),Po=r.n(So),Co=r(88),To=r.n(Co);r(103),r(104);function ko(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(a)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Ao=i.a.createContext(),qo=function(){var e=ko(Object(o.useContext)(Ao),2);return{layout:e[0],setLayout:e[1]}},Io=function(e){var t=e.children,r=Object(o.useState)(null);return i.a.createElement(Ao.Provider,{value:r},t)},Do=function(e){var t=e.children,r=e.config,n=qo().layout;return i.a.createElement("div",{onClick:function(){null!==n&&(n.root.contentItems.length>0?n.root.contentItems[0].addChild(r):n.root.addChild(r))}},t)},Ro=function(e){var t=e.children,r=e.config,n=Object(o.useRef)(null),a=qo().layout;return Object(o.useEffect)(function(){null!==n&&null!==a&&a.createDragSource(n.current,r)},[n,a]),i.a.createElement("div",{ref:n},t)},Mo=function(e){var t=Object(o.useRef)(null),r=ko(Object(o.useState)([]),2),n=r[0],a=r[1],l=qo().setLayout,u=e.config,c=e.components,s=e.onChange,f=ko(Object(o.useState)(null),2),m=(f[0],f[1]);return Object(o.useEffect)(function(){if(null!==t.current){var e=new To.a(u,t.current);l(e);var r=function(){e.updateSize()};window.addEventListener("resize",r),e.on("initialised",function(){e.unbind("initialised"),setTimeout(function(){e.on("stateChanged",function(){s(e.toConfig())})},0)});var n=function(){if(t.current){var e=t.current.offsetWidth,r=t.current.offsetHeight;m({width:e,height:r})}};return e.on("componentCreated",function(e){e.container&&e.container.on("resize",n)}),e.on("itemDestroyed",function(e){if(e.container){var t=e.container.getElement().get(0);a(function(e){return e.filter(function(e){return e.el!==t})})}}),Object.keys(c).forEach(function(t){e.registerComponent(t,function(e){var r=e.getElement().get(0);a(function(e){return e.concat({el:r,key:t})})})}),e.init(),function(){e.destroy(),window.removeEventListener("resize",r)}}},[]),i.a.createElement(o.Fragment,null,i.a.createElement("div",{style:{height:"100%",width:"100%"},ref:t}),n.map(function(e){var t=e.key,r=e.el,n=c[t];return Po.a.createPortal(i.a.createElement(n,null),r)}))},Wo=r(36),Fo=r(89),Lo=r.n(Fo),No=r(90),Bo=r.n(No),zo=r(31),_o=r.n(zo),Ho=r(12);function Go(e){return(Go="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Uo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(a)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Jo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Qo(e,t){return!t||"object"!==Go(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Vo(e){return(Vo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $o(e,t){return($o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ko=function(e){function t(e){var r,n,a,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Qo(this,Vo(t).call(this,e))).state={map:null,geoRenderer:null,lat:0,lon:0,containerWidth:0,containerHeight:0},r.mapDivElement=null,r.setMapDiv=function(e){r.mapDivElement=e},r.pointerMove=function(e){var t=Uo(e.coordinate,2),n=t[0],a=t[1];r.setState({lat:a,lon:n})},r.mapResize=(n=200,a=function(){r.state.geoRenderer&&r.state.geoRenderer.resizeMap()},o=0,function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];window.requestAnimationFrame(function(){var e=(new Date).getTime();e-o>=n&&(o=e,a.apply(void 0,t))})}),r}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$o(e,t)}(t,i.a.Component),r=t,(n=[{key:"componentDidUpdate",value:function(e){var t=this.props,r=t.geos,n=t.viewport;if(this.state.geoRenderer&&(r!==e.geos&&(this.state.geoRenderer.clearGeos(),this.state.geoRenderer.renderList(r||[])),n&&n!==e.viewport&&this.state.geoRenderer.panToExtent(n)),this.mapDivElement){var a=this.mapDivElement.parentElement.offsetWidth,o=this.mapDivElement.parentElement.offsetHeight;a===this.state.containerWidth&&o===this.state.containerHeight||(this.setState({containerWidth:a,containerHeight:o}),this.mapResize())}}},{key:"componentDidMount",value:function(){var e=this,t=new Wo.Map({layers:[new Lo.a({source:new Bo.a})],target:this.mapDivElement,view:new Wo.View({center:[0,0],rotation:0,zoom:this.props.zoom,minZoom:this.props.minZoom,maxZoom:this.props.maxZoom,projection:this.props.projection})});this.mapDivElement.querySelectorAll(".ol-overlaycontainer-stopevent, .ol-overlaycontainer").forEach(function(e){return e.style.display="none"}),t.on("pointermove",this.pointerMove);var r=new Ho.renderer.Renderer(t,this.props.style,this.props.maxZoom);r.clearGeos(),r.renderList(this.props.geos||[]),this.props.viewport&&r.panToExtent(this.props.viewport),this.setState({map:t,geoRenderer:r},function(){e.props.onMapLoaded&&e.props.onMapLoaded(t)})}},{key:"componentWillUnmount",value:function(){this.state.map&&this.state.map.un("pointermove",this.pointerMove)}},{key:"render",value:function(){var e=this.state,t=e.lat,r=e.lon;return i.a.createElement(_o.a,{width:this.props.width||"100%",height:this.props.height||"100%",bgcolor:"black",position:"relative"},i.a.createElement(_o.a,{width:"100%",height:"100%",ref:this.setMapDiv,className:"map resize-listener"}),i.a.createElement(_o.a,{position:"absolute",left:"0",bottom:"0",bgcolor:"black",color:"white",p:1},Math.abs(t).toFixed(6)," ",t<0?"S":"N"," ",Math.abs(r).toFixed(6)," ",r<0?"W":"E"))}}])&&Jo(r.prototype,n),a&&Jo(r,a),t}(),Yo=r(3),Zo=r(37);r(91);function Xo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ei(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xo(r,!0).forEach(function(t){ti(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xo(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function ti(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ri=Ho.geometry.BUFFER_CLASSNAME,ni=Ho.geometry.HIDDEN_CLASSNAME,ai=Ho.geometry.POINT_RADIUS,oi=(Ho.geometry.POLYGON,function(e,t){return(e.get("class")||[]).includes(t)}),ii=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"rgba(200, 150, 0, 1)";return oi(e,ni)?"rgba(0, 0, 0, 0)":e.get("selected")?Object(Zo.transparentize)(1-t,"rgba(0, 0, 255, 1)"):Object(Zo.transparentize)(1-t,e.get("color")||r)},li=function(e){return e.getGeometry()&&"Point"===e.getGeometry().getType()?new Yo.Style({stroke:new Yo.Stroke({color:ii(e),width:1.8}),fill:new Yo.Fill({color:"rgba(0, 0, 0, 0)"}),image:new Yo.Icon({fill:new Yo.Fill({color:ii(e)}),stroke:new Yo.Stroke({color:ii(e)}),opacity:1,src:"data:image/svg+xml,"+escape((t={color:ii(e,1,"rgba(0, 125, 0, 1)")},r=t.color,'<svg\n    height="16px"\n    id="Layer_1"\n    style="enable-background:new 0 0 16 16;"\n    version="1.1"\n    viewBox="0 0 16 16"\n    width="16px"\n    xml:space="preserve"\n    xmlns="http://www.w3.org/2000/svg"\n    xmlns:xlink="http://www.w3.org/1999/xlink"\n  >\n    <path fill="'.concat(r,'" d="M8,0C4.687,0,2,2.687,2,6c0,3.854,4.321,8.663,5,9.398C7.281,15.703,7.516,16,8,16s0.719-0.297,1-0.602  C9.679,14.663,14,9.854,14,6C14,2.687,11.313,0,8,0z M8,10c-2.209,0-4-1.791-4-4s1.791-4,4-4s4,1.791,4,4S10.209,10,8,10z M8,4  C6.896,4,6,4.896,6,6s0.896,2,2,2s2-0.896,2-2S9.104,4,8,4z" />\n  </svg>'))),scale:1.5})}):new Yo.Style(ei({stroke:new Yo.Stroke({color:ii(e),width:1.8}),fill:new Yo.Fill({color:"rgba(0, 0, 0, 0)"})},oi(e,ri)&&e.get("shape")===ai?{}:{image:new Yo.Circle({radius:4,fill:new Yo.Fill({color:ii(e)})})}));var t,r},ui=r(92),ci=r.n(ui),si=r(93),fi=r.n(si);function mi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(a)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var pi=function(){var e=mi(Object(o.useState)(null),2),t=e[0],r=e[1],n=function(){r(null)},a={"2D Map":{type:"component",title:"2D Map",componentName:"2d-map"},Table:{type:"component",title:"Table",componentName:"table"},Inspector:{type:"component",title:"Inspector",componentName:"inspector"}};return i.a.createElement("div",{style:{position:"absolute",bottom:10,right:10}},i.a.createElement(s.a,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){r(e.currentTarget)},color:"primary",variant:"contained"},"Add Visual"),i.a.createElement(Fe.a,{id:"simple-menu",anchorEl:t,keepMounted:!0,open:Boolean(t),onClose:n},Object.keys(a).map(function(e){var t=a[e];return i.a.createElement(Ne.a,{key:e,onClick:function(){return n()}},i.a.createElement(Ro,{config:t},i.a.createElement(Do,{config:t},e)))})))},di={content:[{type:"row",content:[{type:"component",title:"Table",componentName:"table"}]}]},yi=function(e){var t=e.children;return i.a.createElement("div",{style:{padding:20,boxSizing:"border-box",overflow:"auto",height:"100%",width:"100%"}},t)},vi=function(e){var t=e.results,r=new ci.a({splitCollection:!0}),n=new fi.a,a=new Ho.shapes.ShapeDetector,o={inspector:function(){var e=mi(Er(),1)[0],r=t.filter(function(t){return e.has(t.metacard.properties.id)});return i.a.createElement(yi,null,i.a.createElement(aa,{results:r}))},table:function(){return i.a.createElement(yi,null,i.a.createElement(pn,{attributes:["id","title","created"],results:t}))},"2d-map":function(){var e=mi(Er(),1)[0],o=t.map(function(t){return t.metacard.properties.location?r.readFeatures(t.metacard.properties.location).map(function(r){return Ho.geometry.makeGeometry(t.metacard.properties.id,n.writeFeatureObject(r),"",a.shapeFromFeature(r),0,Ho.geometry.METERS,{selected:e.has(t.metacard.properties.id)})}):[]}).reduce(function(e,t){return e.concat(t)},[]),l=o.filter(function(e){return e.properties.selected}).map(function(e){return e.bbox}),u=l.length>0?Ho.geometry.combineExtents(l):null;return i.a.createElement(Ko,{projection:"EPSG:4326",style:li,coordinateType:Ho.coordinates.LAT_LON,maxZoom:20,minZoom:1.5,zoom:2,geos:o,viewport:u})}};return i.a.createElement(Io,null,i.a.createElement("div",{style:{position:"relative",height:"calc(100vh - 64px)"}},i.a.createElement(Mo,{config:di,components:o,onChange:function(){}}),i.a.createElement(pi,null)))},bi=function(e){var t=e.queries,r=e.onSelect;return i.a.createElement("div",null,i.a.createElement(le.a,null,t.map(function(e){var t=e.id,n=e.title;return i.a.createElement(o.Fragment,{key:t},i.a.createElement(ce.a,{button:!0,onClick:function(){r(e)}},i.a.createElement(pe.a,{primary:n,secondary:"Has not been run"})),i.a.createElement(_.a,null))})))};function gi(){var e=wi(['\n  query Workspaces {\n    metacardsByTag(tag: "workspace") {\n      attributes {\n        id\n        title\n      }\n    }\n  }\n']);return gi=function(){return e},e}function hi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Ei(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Oi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(a)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ji(){var e=wi(["\n  query WorkspaceById($id: ID!) {\n    metacardById(id: $id) {\n      attributes {\n        id\n        title\n        queries {\n          id\n          title\n          cql\n          filterTree\n        }\n      }\n    }\n  }\n"]);return ji=function(){return e},e}function wi(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var xi=Object(o.memo)(vi),Si=function(){return i.a.createElement("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"}},i.a.createElement(K.a,{style:{width:"25vw",height:10}}))},Pi=B()(ji()),Ci=B()(gi());function Ti(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(a)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var ki=function(e){return i.a.createElement(g.a,null,i.a.createElement(s.a,{fullWidth:!0,onClick:e.onClick,to:e.to,component:F.Link,style:{justifyContent:"flex-start"}},e.children))},Ai=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:E.a,n=arguments.length>3?arguments[3]:void 0;return{title:t,path:e,link:function(n){var a=n.onClick;return i.a.createElement(ki,{to:e,onClick:a},i.a.createElement(r,{style:{marginRight:10}}),t)},component:n||function(){return i.a.createElement("h2",null,t)}}},qi=[Ai("/","Home",T.a),Ai("/workspaces","Workspaces",x.a,function(){var e=Object(L.useQuery)(Ci),t=e.loading,r=e.error,n=e.data;if(t)return i.a.createElement(Si,null);if(r)return i.a.createElement("div",null,"Error");var a=n.metacardsByTag.attributes;return i.a.createElement("div",null,a.map(function(e){return i.a.createElement(F.Link,{key:e.id,to:"/workspaces/".concat(e.id)},e.title)}))}),Ai("/search","Search",R.a,ca),Ai("/sources","Sources",j.a,function(){var e=function(e){var t=Object(L.useQuery)(je),r=t.data,n=t.loading,a=t.error;return n||a?e:r.systemProperties.sourcePollInterval}(6e4),t=Object(L.useQuery)(we,{pollInterval:e}),r=t.loading,n=t.data,a=void 0===n?{}:n;return i.a.createElement(Oe,{sources:r?[]:a.sources})}),Ai("/search-forms","Search Forms",P.a),Ai("/result-forms","Result Forms",W.a,function(){var e,t=Object(L.useQuery)(ho),r=t.loading,n=t.error,a=t.data,o=io((e=B()(ro(),go),Object(L.useMutation)(e,{update:function(e,t){var r=t.data,n=ho,a=e.readQuery({query:n}).metacardsByTag.attributes.filter(function(e){return e.id!==r.createMetacard.id}).concat(r.createMetacard);e.writeQuery({query:n,data:{metacardsByTag:{attributes:a,__typename:"QueryResponse"}}})}})),1)[0],l=io(function(){var e=B()(to(),go);return Object(L.useMutation)(e)}(),1)[0],u=io(function(){var e=B()(eo());return Object(L.useMutation)(e,{update:function(e,t){var r=t.data,n=ho,a=e.readQuery({query:n}).metacardsByTag.attributes.filter(function(e){return e.id!==r.deleteMetacard});e.writeQuery({query:n,data:{metacardsByTag:{attributes:a,__typename:"QueryResponse"}}})}})}(),1)[0];if(r)return i.a.createElement(bo,{loading:r});if(n)return i.a.createElement(bo,{error:n});var c=a.metacardsByTag.attributes;return i.a.createElement(bo,{forms:c,Editor:jo,onCreate:function(e){var t=e.attributes,r=Ya(e,["attributes"]);o({variables:{attrs:uo({ui_attribute_group:t,metacard_type:"attribute-group",metacard_tags:["VALID","attribute-group"]},r)}})},onSave:function(e){var t=e.attributes,r=Ya(e,["attributes"]);l({variables:{id:e.id,attrs:uo({ui_attribute_group:t},r)}})},onDelete:function(e){u({variables:{id:e.id}})}})}),Ai("/about","About",A.a,function(){var e=Object(L.useQuery)(oe),t=e.error,r=e.data,n={error:t,attributes:(void 0===r?{}:r).systemProperties};return i.a.createElement(ae,n)})],Ii=function(e){var t=e.title,r=void 0===t?"That MF Electric Boogaloo":t,n=e.onMenuOpen;return i.a.createElement(u.a,{style:{position:"static"}},i.a.createElement(v.a,null,i.a.createElement(d.a,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:n},i.a.createElement(I.a,null)),i.a.createElement(g.a,{variant:"h6",noWrap:!0},r)))},Di=[{title:"Workspace",path:"/workspaces/:id",component:function(){var e=Object(F.useParams)().id,t=Oi(Object(o.useState)(null),2),r=t[0],n=t[1],a=Dr(),l=a.results,u=a.status,c=a.onSearch,s=a.onCancel,f=a.onClear,m=Object(L.useQuery)(Pi,{variables:{id:e}}),p=m.loading,y=m.error,v=m.data;if(p)return i.a.createElement(Si,null);if(y)return i.a.createElement("div",null,"Error");var b=v.metacardById.attributes[0],h=b.title,E=b.queries;return i.a.createElement("div",{style:{display:"flex"}},i.a.createElement("div",{style:{boxSizing:"border-box",width:400}},i.a.createElement(g.a,{variant:"h4",component:"h1",style:{padding:20}},h),i.a.createElement(_.a,null),i.a.createElement("div",null,null===r?i.a.createElement(bi,{queries:E,onSelect:function(e){f(),n(e)}}):null,null!==r?i.a.createElement("div",{style:{padding:20}},i.a.createElement("div",{style:{display:"flex",alignItems:"center"}},i.a.createElement(Ue.a,{style:{marginBottom:20},label:"Query Title",value:r.title||"",fullWidth:!0}),i.a.createElement(d.a,{onClick:function(){return n(null)}},i.a.createElement(xo.a,null))),i.a.createElement("div",{style:{overflow:"hidden",padding:2}},i.a.createElement(fr,{query:r,onSearch:function(e){n(e),f(),c(e)}})),i.a.createElement(An,{sources:u,onRun:function(e){c(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?hi(r,!0).forEach(function(t){Ei(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hi(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},r,{srcs:e}))},onCancel:function(e){e.forEach(function(e){s(e)})}})):null)),i.a.createElement("div",{style:{flex:"1"}},i.a.createElement(xi,{results:l})))}}],Ri=function(){var e=Ti(i.a.useState(!1),2),t=e[0],r=e[1],n=function(){r(!0)},a=function(){r(!1)};return i.a.createElement(F.HashRouter,null,i.a.createElement(m.a,{anchor:"left",open:t,onClose:a},qi.map(function(e){var t=e.path,r=e.link;return i.a.createElement(r,{onClick:a,key:t})})),qi.concat(Di).map(function(e){var t=e.title,r=e.path,a=e.component;return i.a.createElement(F.Route,{key:r,exact:!0,path:r,render:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(Ii,{title:t,onMenuOpen:n}),i.a.createElement(a,null))}})}))},Mi=r(29),Wi=r(94),Fi=r(95),Li=r.n(Fi),Ni=r(96),Bi=r(97),zi=r(98),_i=r(99),Hi=r.n(_i),Gi={Query:{users:function(e,t,r,n){return Hi.a.get("http://localhost:3001/users").then(function(e){return e.data}).then(function(e){return e||null})}}},Ui=function(e){var t=e.isClient,r=Object(zi.makeExecutableSchema)({typeDefs:"\ntype User {\n  id: Int\n  name: String\n}\n\ntype Query {\n  users: [User]\n}\n",resolvers:Gi}),n=new Bi.InMemoryCache({dataIdFromObject:function(e){return e.id||null}});return new Li.a({link:new Ni.SchemaLink({schema:r}),cache:t?n.restore(window.__APOLLO_STATE__):n,ssrMode:!t})},Ji=r(100),Qi=r(101),Vi=a()();Vi.use(a.a.static("public")),Vi.get("*",function(e,t){!function(e,t){var r=Ui({isClient:!1}),n=i.a.createElement(Qi.ApolloProvider,{client:r},i.a.createElement(F.StaticRouter,{location:e.path,context:{}},i.a.createElement("div",null,Object(Wi.renderRoutes)(Ri)))),a=function(e){var t=e.content;e.state;return i.a.createElement("html",null,i.a.createElement("body",null,i.a.createElement("div",{id:"root",dangerouslySetInnerHTML:{__html:t}}),i.a.createElement("script",{src:"bundle.client.js"})))};Object(Ji.getDataFromTree)(n).then(function(){var e=Object(Mi.renderToString)(n),o=r.extract(),l=i.a.createElement(a,{content:e,state:o});t.status(200),t.send("<!doctype html>\n".concat(Object(Mi.renderToStaticMarkup)(l))),t.end()})}(e,t)}),Vi.listen(3003,function(){return console.log("App is running on port 3003")})}]);